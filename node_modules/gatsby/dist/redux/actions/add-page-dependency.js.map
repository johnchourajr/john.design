{"version":3,"sources":["../../../src/redux/actions/add-page-dependency.ts"],"names":["createPageDependency","path","nodeId","connection","queries","store","getState","nodeDependencyExists","connectionDependencyExists","byNode","has","get","byConnection","dispatch"],"mappings":";;;;;AAAA;;AAEA;;AAEO,MAAMA,oBAAoB,GAAG,CAAC;AACnCC,EAAAA,IADmC;AAEnCC,EAAAA,MAFmC;AAGnCC,EAAAA;AAHmC,CAAD,KAQxB;AACV,QAAM;AAAEC,IAAAA;AAAF,MAAcC,QAAMC,QAAN,EAApB,CADU,CAGV;AACA;;;AACA,MAAIC,oBAAoB,GAAG,KAA3B;AACA,MAAIC,0BAA0B,GAAG,KAAjC;;AACA,MAAI,CAACN,MAAL,EAAa;AACXK,IAAAA,oBAAoB,GAAG,IAAvB;AACD;;AACD,MACEL,MAAM,IACNE,OAAO,CAACK,MAAR,CAAeC,GAAf,CAAmBR,MAAnB,CADA,IAEAE,OAAO,CAACK,MAAR,CAAeE,GAAf,CAAmBT,MAAnB,EAA4BQ,GAA5B,CAAgCT,IAAhC,CAHF,EAIE;AACAM,IAAAA,oBAAoB,GAAG,IAAvB;AACD;;AACD,MAAI,CAACJ,UAAL,EAAiB;AACfK,IAAAA,0BAA0B,GAAG,IAA7B;AACD;;AACD,MACEL,UAAU,IACVC,OAAO,CAACQ,YAAR,CAAqBF,GAArB,CAAyBP,UAAzB,CADA,IAEAC,OAAO,CAACQ,YAAR,CAAqBD,GAArB,CAAyBR,UAAzB,EAAsCO,GAAtC,CAA0CT,IAA1C,CAHF,EAIE;AACAO,IAAAA,0BAA0B,GAAG,IAA7B;AACD;;AACD,MAAID,oBAAoB,IAAIC,0BAA5B,EAAwD;AACtD;AACD,GA7BS,CA+BV;;;AACAH,UAAMQ,QAAN,CAAe,oCAA6B;AAAEZ,IAAAA,IAAF;AAAQC,IAAAA,MAAR;AAAgBC,IAAAA;AAAhB,GAA7B,CAAf;AACD,CAzCM","sourcesContent":["import { store } from \"../\"\n\nimport { createPageDependency as internalCreatePageDependency } from \"./internal\"\n\nexport const createPageDependency = ({\n  path,\n  nodeId,\n  connection,\n}: {\n  path: string\n  nodeId: string\n  connection?: string\n}): void => {\n  const { queries } = store.getState()\n\n  // Check that the dependencies aren't already recorded so we\n  // can avoid creating lots of very noisy actions.\n  let nodeDependencyExists = false\n  let connectionDependencyExists = false\n  if (!nodeId) {\n    nodeDependencyExists = true\n  }\n  if (\n    nodeId &&\n    queries.byNode.has(nodeId) &&\n    queries.byNode.get(nodeId)!.has(path)\n  ) {\n    nodeDependencyExists = true\n  }\n  if (!connection) {\n    connectionDependencyExists = true\n  }\n  if (\n    connection &&\n    queries.byConnection.has(connection) &&\n    queries.byConnection.get(connection)!.has(path)\n  ) {\n    connectionDependencyExists = true\n  }\n  if (nodeDependencyExists && connectionDependencyExists) {\n    return\n  }\n\n  // It's new, let's dispatch it\n  store.dispatch(internalCreatePageDependency({ path, nodeId, connection }))\n}\n"],"file":"add-page-dependency.js"}