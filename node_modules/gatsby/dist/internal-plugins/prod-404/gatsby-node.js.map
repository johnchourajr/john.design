{"version":3,"sources":["../../../src/internal-plugins/prod-404/gatsby-node.js"],"names":["emitter","require","boundActionCreators","PROD_404_PAGE_PATH","page404","exports","onCreatePage","page","store","actions","test","path","createPage","on","action","payload","deletePage"],"mappings":";;AAAA,MAAM;AAAEA,EAAAA;AAAF,IAAcC,OAAO,CAAE,aAAF,CAA3B;;AACA,MAAM;AAAEC,EAAAA;AAAF,IAA0BD,OAAO,CAAE,qBAAF,CAAvC;;AAEA,MAAME,kBAAkB,GAAI,WAA5B;AAEA,IAAIC,OAAO,GAAG,IAAd;;AACAC,OAAO,CAACC,YAAR,GAAuB,CAAC;AAAEC,EAAAA,IAAF;AAAQC,EAAAA,KAAR;AAAeC,EAAAA;AAAf,CAAD,KAA8B;AACnD;AACA;AACA;AACA,MAAI,CAACL,OAAD,IAAY,cAAcM,IAAd,CAAmBH,IAAI,CAACI,IAAxB,CAAhB,EAA+C;AAC7CF,IAAAA,OAAO,CAACG,UAAR,CAAmB,EACjB,GAAGL,IADc;AAEjBI,MAAAA,IAAI,EAAER;AAFW,KAAnB;AAIAC,IAAAA,OAAO,GAAGG,IAAV;AACD;AACF,CAXD;;AAaAP,OAAO,CAACa,EAAR,CAAY,aAAZ,EAA0BC,MAAM,IAAI;AAClC,MAAIV,OAAO,IAAIU,MAAM,CAACC,OAAP,CAAeJ,IAAf,KAAwBP,OAAO,CAACO,IAA/C,EAAqD;AACnDT,IAAAA,mBAAmB,CAACc,UAApB,CAA+B,EAC7B,GAAGZ,OAD0B;AAE7BO,MAAAA,IAAI,EAAER;AAFuB,KAA/B;AAIAC,IAAAA,OAAO,GAAG,IAAV;AACD;AACF,CARD","sourcesContent":["const { emitter } = require(`../../redux`)\nconst { boundActionCreators } = require(`../../redux/actions`)\n\nconst PROD_404_PAGE_PATH = `/404.html`\n\nlet page404 = null\nexports.onCreatePage = ({ page, store, actions }) => {\n  // Copy /404/ to /404.html as many static site hosts expect\n  // site 404 pages to be named this.\n  // https://www.gatsbyjs.org/docs/add-404-page/\n  if (!page404 && /^\\/?404\\/?$/.test(page.path)) {\n    actions.createPage({\n      ...page,\n      path: PROD_404_PAGE_PATH,\n    })\n    page404 = page\n  }\n}\n\nemitter.on(`DELETE_PAGE`, action => {\n  if (page404 && action.payload.path === page404.path) {\n    boundActionCreators.deletePage({\n      ...page404,\n      path: PROD_404_PAGE_PATH,\n    })\n    page404 = null\n  }\n})\n"],"file":"gatsby-node.js"}